require 'csv'

all = []

names = []

CSV.foreach(File.join(ARGV[0],"names.csv")) do |row|
  names << [row[0],row[1]]
  all << [row[1], false, 0]
end

CSV.foreach(File.join(ARGV[0],"results1.csv")) do |row|
  nams=row[0].split("_")[0..1]
  nam=nams[0] + " " + nams[1]
  all.each do |element|
    if element[0]==nam
      e[0] = File.join( ARGV[0], e[0] ).to_s
      all[n][1] = DateTime.strptime( `git log --format="format:%ct" -- #{e[0]}`.lines.first.chomp, '%s' )
    end
  end
end

CSV.foreach(File.join(ARGV[0],"results3.csv")) do |row|
  nams=row[0].split("_")[0..1]
  nam=nams[0] + " " + nams[1]
  all.each do |element|
    if element[0]==nam
      e[0] = File.join( ARGV[0], e[0] ).to_s
      all[n][2] = DateTime.strptime( `git log --format="format:%ct" -- #{e[0]}`.lines.first.chomp, '%s' )
    end
  end
end

all = all.sort {|a,b| a[0] <=> b[0] }

CSV.open("results2.csv", "w") do |csv|
  all.each do |element|
  csv << element
end
end
